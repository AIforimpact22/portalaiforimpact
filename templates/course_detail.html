<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{ course.title }} · Learning Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#f7f7fb; --card:#fff; --text:#1b1f24; --muted:#586174; --accent:#2f6feb; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    header { padding:24px; background:linear-gradient(120deg, #e9f0ff, #f7f7fb); border-bottom:1px solid #e8e8ef; }
    header h1 { margin:0 0 6px; font-size: 1.4rem; }
    header p { margin:0; color:var(--muted); }
    main { padding: 24px; max-width: 900px; margin: 0 auto; }
    .section { background:var(--card); border:1px solid #ececf3; border-radius:12px; padding:16px; margin-bottom:16px; }
    .section h3 { margin:0 0 8px; }
    .lesson { padding:10px 12px; border-radius:8px; border:1px solid #f0f0f6; margin:6px 0; display:flex; justify-content:space-between; align-items:center; }
    .kind { font-size:12px; padding:2px 8px; border-radius:999px; background:#eef3ff; color:var(--accent); border:1px solid #dfe6ff; }
    .muted { color:var(--muted); font-size:12px; }
    a.back { text-decoration:none; color:var(--accent); font-weight:600; }
  </style>
</head>
<body>
  <header>
    <p><a class="back" href="/">← Back</a></p>
    <h1>{{ course.title }}</h1>
    <p class="muted">
      {% if course.is_published %}Published{% else %}Draft{% endif %}
      {% if course.published_at %} &middot; {{ course.published_at }}{% endif %}
    </p>
  </header>

  <main>
    {% if sections|length == 0 %}
      <p class="muted">No sections yet in this course’s structure.</p>
    {% else %}
      {% for s in sections %}
        <section class="section">
          <h3>{{ s.title }}</h3>
          {% set lessons = s.lessons or [] %}
          {% if lessons|length == 0 %}
            <p class="muted">No lessons in this section.</p>
          {% else %}
            {% for l in lessons %}
              <div class="lesson">
                <div>
                  <strong>{{ l.title }}</strong>
                  {% if l.get("content") and l.get("content").get("notes_md") %}
                    <div class="muted">Has notes</div>
                  {% endif %}
                </div>
                <span class="kind">{{ l.kind }}</span>
              </div>
            {% endfor %}
          {% endif %}
        </section>
      {% endfor %}
    {% endif %}
  </main>
</body>
</html>
